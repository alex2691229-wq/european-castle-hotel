# 歐堡商務汽車旅館網站開發待辦清單

## 資料庫設計
- [x] 設計房型資料表（房型名稱、描述、坪數、價格、設施、照片）
- [x] 設計訂房資料表（訂房日期、退房日期、房型、客戶資訊、訂單狀態）
- [x] 設計最新消息資料表（標題、內容、發布日期、類型）
- [x] 設計設施服務資料表（設施名稱、描述、照片）

## 視覺設計
- [x] 配置 Art Deco 風格主題色彩（深黑色與金屬金色）
- [x] 引入宏偉的粗襯線字體（Playfair Display 或 Cormorant）
- [x] 設計幾何裝飾元素與階梯式線條樣式
- [x] 配置全域 CSS 變數與樣式

## 核心頁面開發
- [x] 首頁：輪播圖展示、快速訂房入口、特色介紹
- [x] 房型介紹頁面：房型列表與詳細資訊展示
- [x] 線上訂房頁面：日期選擇、房型選擇、空房查詢、預約表單
- [x] 設施服務頁面：展示旅館特色設施
- [x] 交通資訊頁面：Google 地圖整合、路線規劃、周邊景點
- [x] 最新消息頁面：消息列表與詳細內容
- [x] 聯絡我們頁面：聯絡表單與資訊展示
## 後台管理系統
- [x] 管理員登入與權限控制
- [x] 房型管理：新增、編輯、刪除房型資訊
- [x] 訂單管理：查看、確認、取消訂單
- [x] 最新消息管理：發布、編輯、刪除公告
- [x] 設施管理：更新設施資訊與照片
- [ ] 圖片庫管理：集中管理所有網站圖片

## 進階功能
- [ ] 即時空房查詢系統
- [ ] 訂房通知系統（新訂單、取消訂單通知老闆）
- [ ] AI 聊天機器人（回答常見問題）
- [ ] Google 地圖整合（位置顯示、路線規劃）
- [ ] 圖片上傳與管理（S3 整合）

## 測試與優化
- [ ] 響應式設計測試（手機、平板、電腦）
- [ ] 訂房流程測試
- [ ] 後台管理功能測試
- [ ] 效能優化與載入速度優化
- [ ] SEO 優化設定

## 部署準備
- [ ] 建立專案檢查點
- [ ] 準備上線文件

## AI 聊天機器人開發
- [x] 建立 AI 聊天機器人元件
- [x] 整合 LLM 功能上下文提取
- [x] 實現消息歷史記錄
- [x] 添加消息加載機制
- [x] 編寫消息路由处理程序

## 首頁管理功能
- [x] 建立首頁管理元件
- [x] 支援輪播照片上傳和更換
- [x] 支援特色區域照片上傳和更換（VIP車庫、精綻客房等）
- [x] 在管理後台添加首頁管理標籤

## 錯誤修復
- [x] 修復首頁和房型頁面的 JSON 解析錯誤
- [x] 修復嵌套 <a> 標籤錯誤
- [x] 改善 safeJsonParse 函數的錯誤处理

## 房間刪除功能修復
- [x] 檢查後台房型管理的刪除按鈕
- [x] 修復刪除功能無法正常運作的問題
- [x] 測試刪除功能確保正常運作

## 可預訂日期日曆功能
- [x] 在房型介紹頁面添加日曆元件
- [x] 實現日期可用性查詢 API
- [x] 顯示已預訂和可預訂日期
- [x] 整合到房型詳情頁面

## 後台房間可用性管理功能
- [x] 建立房間可用性資料表
- [x] 建立房間可用性管理元件（月曆方式）
- [x] 實現點擊日期開啟/關閉預訂功能
- [x] 實現批量設定多個日期的功能
- [x] 在管理後台添加房間可用性管理標籤
- [x] 更新前端日曆元件以顯示管理員設定的不可預訂日期
- [x] 建立單元測試並通過所有測試（22項測試全部通過）

## 客戶回報的問題
- [x] 首頁輪播照片上傳無法正常運作
  - 修複：新增首頁配置資料表，將輪播照片存儲到資料庫
  - 修複：更新首頁管理元件以使用資料庫存儲
  - 修複：更新首頁元件以從資料庫讀取輪播照片
- [x] 房價未顯示平日/假日價格區分
  - 修複：更新房型詳情頁面，在預訂欄位顯示假日價格
- [x] 建立测試並通過所有測試（28項測試全部通過）


## 嵌套 <a> 標籤錯誤修複
- [x] 診斷首頁嵌套 <a> 標籤錯誤位置
  - 修複：將所有 Link 組件改成 div + onClick 或 button + onClick
  - 修複：使用 window.location.href 進行頁面導航
- [x] 修複首頁元件中的嵌套 <a> 標籤
  - 修複位置：英雄按鈕、房型卡片、最新消息卡片、CTA 按鈕
- [x] 測試修複並驗證功能（28項測試全部通過）


## 尊享服務和設施管理功能
- [x] 設計尊享服務照片管理資料結構
- [x] 建立尊享服務照片管理後台元件
- [x] 建立設施服務文字管理功能
- [x] 整合到管理後台
- [x] 測試所有功能（28項測試全部通過）


## 首頁輪播和尊享服務圖片顯示問題
- [x] 診斷首頁輪播照片無法更新的問題
  - 修複：修複 HomeManagement.tsx 的 import 重複問題
- [x] 診斷尊享服務無法顯示圖片的問題
  - 修複：建立尊享服務管理元件
  - 修複：更新首頁元件以顯示資料庫中的尊享服務
- [x] 修複首頁輪播照片顯示和更新
  - 修複：新增尊享服務管理元件 (FeaturedServicesManagement.tsx)
- [x] 修複尊享服務圖片顯示
  - 修複：更新首頁元件以從資料庫讀取尊享服務
- [x] 建立前端管理元件
  - 建立：FeaturedServicesManagement.tsx
  - 整合：在 Admin.tsx 中添加尊享服務標籤
- [x] 測試所有功能（28項測試全部通過）


## 完整功能測試計劃
- [ ] 診斷首頁輪播照片無法更新的根本原因
- [ ] 修復首頁輪播照片上傳和顯示功能
- [ ] 測試首頁輪播照片上傳、保存、顯示
- [ ] 測試尊享服務新增、編輯、刪除
- [ ] 測試尊享服務圖片上傳和顯示
- [ ] 測試首頁尊享服務區域顯示
- [ ] 測試所有管理後台功能
- [ ] 驗證資料庫數據持久化
- [ ] 驗證所有圖片正確顯示


## 首頁輪播照片自動保存修復
- [x] 診斷首頁輪播照片無法更新的根本原因
  - 原因：上傳照片後沒有自動保存到資料庫，需要手動點擊「儲存設定」
- [x] 修復首頁輪播照片上傳和顯示功能
  - 修復：修改 HomeManagement.tsx，上傳照片後自動保存到資料庫
  - 修復：添加自動保存的錯誤處理和用戶提示
- [x] 測試所有功能（28項測試全部通過）
- [x] 驗證首頁輪播照片正確顯示和更新


## 真實端到端測試（客戶反饋功能不可用）
- [ ] 進行真實的首頁輪播照片上傳測試
- [ ] 進行真實的尊享服務照片上傳測試
- [ ] 檢查資料庫中的數據是否正確保存
- [ ] 檢查首頁是否正確顯示上傳的照片
- [ ] 修復所有發現的問題
- [ ] 驗證功能確實可用後再交付


## 圖片上傳系統完整修復
- [ ] 診斷整個圖片上傳系統的問題
- [ ] 檢查 upload.image tRPC 路由是否正確
- [ ] 檢查圖片上傳前端元件
- [ ] 修復圖片上傳 API
- [ ] 修復首頁輪播圖片上傳和同步
- [ ] 修復房型照片上傳和同步
- [ ] 修復設施照片上傳和同步
- [ ] 修復尊享服務照片上傳和同步
- [ ] 測試所有圖片上傳功能
- [ ] 驗證圖片在各模塊正確顯示


## 首頁內容刪除
- [x] 刪除首頁「尊享服務」部分
  - 刪除：隆藏了尊享服務整個 section
- [x] 刪除首頁「精緊客房」部分
  - 刪除：隆藏了特色區域中的精緊客房卡片
- [x] 刪除首頁「VIP車庫」部分
  - 刪除：隆藏了VIP車庫特色區域
- [x] 驗證首頁顯示正確（28項測試全部通過）


## 社交媒體連結更新
- [x] 更新 Facebook 粉絲團連結為 https://www.facebook.com/castlehoteltainan
  - 更新：頁腳中的 Facebook 連結已更新，並添加了 target="_blank" 和 rel="noopener noreferrer"
- [x] 驗證所有社交媒體連結正確（28項測試全部通過）


## 管理後台嵌套 <a> 標籤錯誤修復
- [ ] 診斷管理後台的嵌套 <a> 標籤錯誤
- [ ] 修復 Admin.tsx 中的嵌套 <a> 標籤
- [ ] 測試管理後台功能


## 訪客無需登入瀏覽功能
- [ ] 檢查網站的驗證設定
- [ ] 修改 App.tsx 以不需要登入就能訪問公開頁面
- [ ] 修改管理後台需要登入保護
- [ ] 測試訪客無需登入瀏覽功能
- [ ] 測試管理後台登入保護


## 多帳號認證系統實現
- [x] 修改數據庫 schema 添加 username 和 passwordHash 欄位
- [ ] 實現用戶名/密碼登入後端 API
- [ ] 實現登入頁面和帳戶管理頁面
- [ ] 測試用戶名/密碼登入功能
- [ ] 測試帳戶管理功能
- [x] 保留 Google 登入作為備選方案


## 帳戶管理分頁實現
- [x] 實現帳戶管理 tRPC 路由（新增、編輯、刪除、查詢）
- [x] 建立帳戶管理頁面組件
- [x] 測試新增帳號功能
- [ ] 測試編輯帳號功能（部分測試）
- [ ] 測試刪除帳號功能
- [ ] 實現密碼加密和登入功能（待後續實現）


## 自定義登入頁面實現（暂時撨置）
- [ ] 實現登入 API 和密碼驗證逐輯
- [ ] 為現有帳號添加密碼
- [ ] 建立自定義登入頁面組件
- [ ] 修改首頁登入按鈕指向新登入頁面
- [ ] 測試用戶名/密碼登入功能


## 已發現的問題需要修複
- [x] 預訂頁面日期選擇器 - 日期輸入有驗證問題
- [x] 最新消息文章連結 - 部分文章頁面返回 404
- [x] 預訂頁面房型選擇 - 使用 form_input 後沒有正確更新顯示


## 新發現的問題需要修複
- [x] 照片刪除功能故障 - 房型管理頁面點擊紅色 X 按鈕刪除照片後，照片仍然存在
- [x] 批量更新頁面數據不同步 - 批量更新顯示的價格與房型管理頁面不一致
- [x] 批量更新功能設計疑問 - 需要澄清「批量更新所有房型」按鈕的具體功能


## 訂單管理系統優化（第一階段）
- [x] 實現視覺化狀態系統 - 改進訂單卡片顯示（彩色狀態標籤、倒計時、房型信息、快速操作按鈕）
- [x] 添加搜尋和篩選功能 - 按狀態、日期、緊急程度篩選和搜尋
- [x] 實現重要信息突顯 - 缺失信息警告、即將入住提醒、待確認高亮
- [x] 測試訂單管理優化功能

## 訂單管理系統優化（第二階段）
- [ ] 添加儀表板概覽 - 統計卡片顯示待確認、已確認、本周入住等數據
- [ ] 改進詳情頁面 - 提供快速操作按鈕（確認、發送郵件、標記入住等）
- [ ] 測試儀表板和詳情頁面功能

## 訂單管理系統優化（第三階段）
- [ ] 添加時間線視圖 - 展示訂單在不同階段的流程
- [ ] 測試時間線視圖功能


## 優先級1修複 - 照片删除、日期選擇器、批量更新、表單驗證
- [x] 修複照片删除功能 - 房型管理頁面的照片删除按鈕
- [x] 驗證日期選擇器 - 確保日期輸入正常運作
- [x] 修複批量更新同步 - 統一數據源、實時同步
- [x] 添加表單驗證錯誤提示 - 实時驗證、清晰錯誤訊息

## 優先級2測試 - 移動端、聊天小工具、性能
- [ ] 測試預訂頁面在手機上的響應式設計
- [ ] 測試管理後台在平板上的響應式設計
- [ ] 測試聊天小工具在首頁是否正常加載
- [ ] 測試聊天小工具的消息發送功能
- [ ] 分析頁面加載速度
- [ ] 優化大型圖片的加載

## 測試報告和修復
- [ ] 生成日期選擇器測試報告
- [ ] 生成表單驗證測試報告
- [ ] 生成移動端測試報告
- [ ] 生成聊天小工具測試報告
- [ ] 生成性能分析報告
- [ ] 實施修復建議


## 訂單快速操作按鈕
- [x] 添加後端 API - 確認訂房、標記入住、發送郵件
- [x] 實現前端快速操作按鈕 - 在訂單卡片上顯示三個按鈕
- [x] 測試快速操作功能
- [x] 添加操作確認對話框
- [x] 添加操作成功/失敗提示


## 表單驗證和提示（高優先級）
- [x] 添加實時驗證提示 - 房型名稱重複警告、價格數字驗證、描述字符數提示
- [x] 清晰的保存狀態 - 未保存變更提示、保存中提示、保存成功確認

## 房型列表改進
- [x] 增強房型卡片 - 顯示假日價格、照片數量、最後編輯時間
- [ ] 批量操作 - 批量更新、批量删除、批量上傳照片

## 訂單管理增強
- [ ] 添加「編輯客人信息」按鈕
- [x] 添加房型篩選功能
- [x] 添加日期範圍篩選功能（緊急、本週、本月）
- [ ] 添加金額範圍篩選功能
- [ ] 創建訂單詳情頁面


## 前台改進 - 優先級1
- [ ] 設置 Stripe 後台架構（等待 API 金鑰）
- [x] 優化日期選擇器 - 顯示房型可用性、灰顯已滿房日期
- [x] 自動計算住宿天數和總價（區分平日/假日價格）
- [x] 實時顯示房間庫存（「還有 X 間房」）
- [x] 添加訂單確認頁面
- [x] 添加訂單追蹤頁面
- [x] 添加可用性標籤（綠色：有房、黃色：僅剩1-2間、紅色：已滿房）
